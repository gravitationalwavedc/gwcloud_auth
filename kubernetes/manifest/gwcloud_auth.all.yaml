---
# 
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: gwcloud_auth
  namespace: gwcloud
  labels:
    name: gwcloud_auth
spec:
  replicas: 1
  template:
    metadata:
      labels:
        name: gwcloud_auth
    spec:
      containers:
      - name: gwcloud_auth
        image: nexus.gw-cloud.org/gwcloud-dev/gwcloud_auth:0.1
        ports:
        - name: http
          containerPort: 80
        - name: https
          containerPort: 443
        resources: {}
        tty: true
      imagePullSecrets:
      - name: regcred
    nodeSelector:
      kubernetes.io/hostname: k8s-3
---
# NodePort service
apiVersion: v1
kind: Service
metadata:
  labels:
    name: gwcloud-auth
  name: gwcloud-auth
  namespace: gwcloud
spec:
  externalTrafficPolicy: Cluster
  ports:
  - name: port-1
    nodePort: 31602
    port: 80
    protocol: TCP
    targetPort: 80
  - name: port-2
    nodePort: 30201
    port: 443
    protocol: TCP
    targetPort: 443
  selector:
    name: gwcloud-auth
  sessionAffinity: None
  type: NodePort
status:
  loadBalancer: {}
... 
